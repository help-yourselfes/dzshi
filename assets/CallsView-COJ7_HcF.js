import{d as _,h as m,c as t,i as p,o as s,n as u,a as k,t as I,b as n,T as h,_ as v,j as l,u as d,R as N,w as C,g as S,k as g,F as y,l as D,m as V,C as b}from"./index-CsLaCM6F.js";import{_ as w,E as $}from"./ErrorBox-D4zcvQxn.js";import{S as E}from"./Spinner-DsnD6M-B.js";import{W as T}from"./WaitASecond-DrPQ0LKc.js";import{N as A}from"./NoDataSticker-BwCXohkB.js";const F={class:"time"},L={key:0,class:"remain-time"},R=_({__name:"Call",props:{isCurrent:{type:Boolean},call:{}},setup(c){const a=c,r=m(()=>{const e=a.call,{type:i}=e;switch(i){case"lesson":return e.name;case"break":return"Перемена";case"big-break":return"Большая перемена";default:return"Неизвестно"}}),o=m(()=>`${a.isCurrent?"current-call":"call"} ${a.call.type}`);return(e,i)=>e.call.type==="lesson"||e.isCurrent?(s(),t("div",{key:0,class:u(o.value)},[k("span",{class:u(e.isCurrent?"active-name":"name")},I(r.value),3),k("div",F,[n(h,{time:e.call.start,class:u(["start",{"fade-text":e.isCurrent}])},null,8,["time","class"]),e.isCurrent?(s(),t("span",L,[n(w,{end:e.call.end},null,8,["end"])])):p("",!0),n(h,{time:e.call.end,class:u(["end",{"fade-text":e.isCurrent}])},null,8,["time","class"])])],2)):p("",!0)}}),W=v(R,[["__scopeId","data-v-239fb5bb"]]),j=_({__name:"DayButton",props:{day:{},isSelected:{type:Boolean}},emits:["update"],setup(c,{emit:a}){const r=c,o=a,e=()=>{o("update",r.day.number)},i=m(()=>r.day["short-name"]),B=m(()=>r.day.name);return(f,Q)=>(s(),l(d(N),{class:u(["day-button",f.isSelected?"current":""]),to:`/calls/${f.day.number}`,onClick:e},{default:C(()=>[S(I(f.isSelected?B.value:i.value),1)]),_:1},8,["class","to"]))}}),z=v(j,[["__scopeId","data-v-1fbf034e"]]),q={key:0},G={key:1},H={key:2,class:"days-container"},J=_({__name:"DaySelect",props:{selectedDayId:{}},setup(c){const a=g(()=>V.getAviableDays());return(r,o)=>(s(),t(y,null,[d(a).loading.value?(s(),t("div",q,[n(E)])):p("",!0),d(a).error.value?(s(),t("div",G,[n($,{error:d(a).error},null,8,["error"])])):(s(),t("div",H,[(s(!0),t(y,null,D(d(a).data.value,e=>(s(),l(z,{day:e,key:e.number,isSelected:r.selectedDayId===e.number},null,8,["day","isSelected"]))),128))]))],64))}}),K=v(J,[["__scopeId","data-v-c98f026c"]]),M={key:1,class:"unsupported-day"},O={key:0,class:"list"},P=_({__name:"CallsView",props:{dayId:{},calls:{},currentCallId:{}},setup(c){return(a,r)=>(s(),t(y,null,[n(K,{selectedDayId:a.dayId},null,8,["selectedDayId"]),a.calls.loading.value||a.calls.error.value?(s(),l(b,{key:0},{default:C(()=>[a.calls.loading.value?(s(),l(T,{key:0,class:"center"})):a.calls.error.value==="unsupported day"?(s(),t("div",M,[r[0]||(r[0]=S(" Этот день не поддерживается ",-1)),n(A,{class:"sticker"})])):(s(),l($,{key:2,error:a.calls.error.value},null,8,["error"]))]),_:1})):(s(),l(b,{key:1},{default:C(()=>[a.currentCallId.data?(s(),t("div",O,[(s(!0),t(y,null,D(a.calls.data.value,(o,e)=>(s(),l(W,{call:o,key:e,isCurrent:e===a.currentCallId.data.value},null,8,["call","isCurrent"]))),128))])):p("",!0)]),_:1}))],64))}}),ee=v(P,[["__scopeId","data-v-224519a5"]]);export{ee as default};
